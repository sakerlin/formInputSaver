# 表單輸入儲存器 - Chrome 擴充功能

這是一個 Chrome 擴充功能，旨在儲存使用者的表單輸入，並允許他們稍後使用這些已儲存的資料輕鬆填寫表單。

## 核心功能

1.  **多樣化的儲存方式**
    - **提交時儲存**：當使用者提交表單時，會彈出對話框詢問是否儲存。
    - **手動儲存 (v1.2 新增)**：使用者可在頁面上點擊右鍵，選擇「手動儲存表單內容」，無需提交即可儲存當前表單的狀態。

2.  **智慧化的資料管理 (v1.2 全面升級)**
    - **網站分類儲存**：所有儲存的資料會自動依照網站網址 (hostname) 進行分類歸檔。
    - **自訂命名**：每一筆儲存的表單資料，都會要求使用者為其自訂一個好記的名稱。
    - **分層級瀏覽介面**：Popup 彈出視窗經過重新設計，會先顯示已存資料的網站列表，點擊網站後才會顯示該網站下的已命名表單列表。
    - **智慧型入口**：當打開 Popup 時，會自動偵測當前分頁的網址，若該網站有已存資料，則會直接顯示該網站的表單列表，加速操作。
    - **單筆資料刪除**：使用者可以針對每一筆已命名的表單資料進行獨立刪除。

3.  **強大的表單填入功能**
    - **一鍵填入**：在 Popup 介面中，點擊「填入」按鈕即可將對應的資料填入當前頁面的表單。
    - **相容動態事件**：填入資料時會自動觸發 `input` 和 `change` 事件，確保能與依賴這些事件的動態網頁（如下拉選單連動）正常互動。
    - **智慧重試機制 (v1.2 新增)**：填入功能具備「智慧重試」機制。對於需要等待前一個欄位填寫完畢後才會出現的「動態欄位」，擴充功能會耐心等待幾秒，直到欄位出現並成功填入。

4.  **進階功能**
    - **網站白名單 (v1.4 新增)**：擴充功能現在只會在您明確加入白名單的網站上注入內容腳本並提供表單儲存與填入功能。這取代了原有的黑名單功能，提供更精細的控制。
    - **強化的資料抓取 (v1.2 新增)**：儲存引擎具備後備抓取機制，即使網頁表單的寫法不標準（例如欄位缺少 `name` 屬性），擴充功能也能盡力抓取其資料。
    - **資料匯出與匯入 (v1.3 新增)**：使用者可在設定頁面將所有已存的表單資料和白名單匯出成 JSON 檔案，方便備份與轉移。也可透過選擇 JSON 檔案將資料匯入，並與現有資料智慧合併。

## 使用的權限

-   `storage`: 用於在使用者本機上保存表單資料和白名單網站列表。
-   `tabs`: 用於和當前分頁互動，以實現智慧入口和表單填入功能。
-   `contextMenus`: 用於新增右鍵選單項目，以實現手動儲存功能。
-   `scripting`: 用於動態注入內容腳本到白名單網站。

---

## v1.4 更新日誌 (本次更新)

- **將黑名單功能改為白名單**：擴充功能現在只會在使用者明確加入白名單的網站上注入內容腳本。這提供了更精細的控制，並解決了可能與其他網站腳本衝突的問題。

## v1.3 更新日誌

- **新增資料匯出／匯入功能**：可在設定頁面中，將所有已存資料（包含表單內容與網站黑名單）匯出成 JSON 檔進行備份，或從備份檔匯入資料。匯入時會與現有資料進行合併，避免重複。

## v1.2 更新日誌

- **新增網站分類儲存**：資料結構全面重構，現可將不同網站的表單分開儲存，並對每筆資料進行命名。
- **新增手動儲存功能**：可透過右鍵選單在不提交表單的情況下儲存當前表單內容。
- **新增智慧重試填入**：填入功能會等待動態欄位的出現，解決了部分欄位填入失敗的問題。
- **強化資料抓取**：新增後備機制，能成功從缺少 `name` 屬性的不標準表單中抓取資料。
- **全新 Popup 介面**：重新設計了彈出視窗，採用分層級、智慧型的瀏覽方式，操作更直覺。

## v1.1 更新日誌

- **新增自訂儲存對話框**：將原有的確認對話框替換為功能更豐富的自訂對話框，提供「儲存」、「暫不儲存」、「封鎖此網站」三個選項。
- **新增網站黑名單功能**：允許使用者將特定網站加入黑名單，以停用儲存提示，並可在彈出視窗中管理此列表。
- **修復字元編碼問題**：在彈出視窗中加入了 UTF-8 編碼宣告，解決了中文顯示為亂碼的問題。
- **修復 JavaScript 事件觸發**：在填入資料後，現在會自動觸發 `input` 和 `change` 事件，以正確驅動依賴這些事件的網頁動態功能（例如：下拉選單連動）。